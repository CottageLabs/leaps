{% extends "base.html" %}

{% block content %}

<link rel="stylesheet" type="text/css" media="all" href="/static/bootstrap3/bootstrap.min.css" />
<script type="text/javascript" src="/static/bootstrap3/bootstrap.min.js"></script>

<script>
jQuery(document).ready(function() {
    
    $("[data-required]").attr('data-required-message',"");

    // add a datepicker to all datepicker classes
    var opts = {
        inline: true,
        dateFormat: 'dd/mm/yy',
        changeYear: true
    };
    $('.datepicker').datepicker(opts);
    var dobopts = {
        inline: true,
        dateFormat: 'dd/mm/yy',
        changeYear: true,
        yearRange: "-22:+0",
        defaultDate: '-17y',
        minDate: '-22y',
        maxDate: '-12y'
    };
    $('.dobdatepicker').datepicker(dobopts);
    
    var dobformat = function(event) {
        event.preventDefault();
        var datestring = $('#date_of_birth').val();
        var pattern = /^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/;
        if ( pattern.test(datestring) ) {
            $('.dobwarning').hide();
            $('#date_of_birth').removeClass('parsley-error').addClass('parsley-validated').addClass('parsley-success');
        } else {
            $('.dobwarning').show();
            $('#date_of_birth').removeClass('parsley-success').removeClass('parsley-validated').addClass('parsley-error');
        }
    }
    $('.checkdob').bind('change',dobformat);
    var postcodeformat = function(event) {
        event.preventDefault();
        var str = $('#post_code').val().toLowerCase().replace(/ /g,'');
        var letters = 'abcdefghijklmnopqrstuvwxyz';
        if ( str.length < 5 || str.length > 8 || letters.indexOf(str[0]) === -1 || letters.indexOf(str[str.length-1]) === -1 || '0123456789'.indexOf(str[2]) === -1) {
            $('.postcodewarning').show();
            $('#post_code').removeClass('parsley-success').removeClass('parsley-validated').addClass('parsley-error');
        } else {
            $('.postcodewarning').hide();
            $('#post_code').removeClass('parsley-error').addClass('parsley-validated').addClass('parsley-success');
        }
    }
    $('.checkpostcode').bind('change',postcodeformat);
    var mobileformat = function(event) {
        event.preventDefault();
        var str = $('#mobile_phone').val();
        if (str.length === 0) {
            $('.mobilewarning').hide();
            $('#mobile_phone').removeClass('parsley-error').removeClass('parsley-validated').removeClass('parsley-success');
        } else {
            try {
                var n = parseInt(str);
                if (str.length === 11) {
                    $('.mobilewarning').hide();
                    $('#mobile_phone').removeClass('parsley-error').addClass('parsley-success');
                } else {
                    $('.mobilewarning').show();
                    $('#mobile_phone').removeClass('parsley-success').addClass('parsley-error');
                }
            } catch(err) {
                $('.mobilewarning').show();
                $('#mobile_phone').removeClass('parsley-success').addClass('parsley-error');
            }
        }
    }
    $('.checkmobile').bind('change',mobileformat);

    $('.select2this').select2({width:'100%'});
    //$('.select2thisRequired').siblings('.select2-container').find('.select2-selection').each(function() { $(this).css({'background-color':'#F2DEDE'}) });
    //$('.select2thisRequired').on('select2:select', function() { $('.select2thisRequired').siblings('.select2-container').find('.select2-selection').each(function() { $(this).css({'background-color':'#DFF0D8'}) }); });

    // hide survey sections and add prev/next nav-throughs
    /*var doprevnext = function(event) {
        event.preventDefault();
        $('#survey').parsley('validate');
        $('.part').hide();
        $(this).hasClass('prev') ? $(this).closest('.part').prev().show() : $(this).closest('.part').next().show();
        window.scrollTo(0,0);
    }*/
    //var prevnext = '<div style="margin:20px 0 20px 0;"><button class="btn btn-info prev">previous</button> <button class="btn btn-info next">next</button></div>';
    //$('.part').append(prevnext);
    //$('.part:first').find('.prev').remove();
    //$('.part:last').find('.next').remove();
    //$('.prev').bind('click',doprevnext);
    //$('.next').bind('click',doprevnext);
    //$('.part').hide();
    //$('.part:first').show();
    //$('#survey').parsley('validate'); // validate to show warnings at start

    // review button show all
    var showall = function(event) {
        event.preventDefault();
        $('#activealert').hide();
        $('.part').show();
        $("html, body").animate({ scrollTop: $('.part.student').offset().top }, "fast");
    }
    $('.review').bind('click',showall);

    var subjects = {{ selections.advancedsubjects|tojson|safe }};

    // function of things to do whenever a row is appended
    var preprow = function(row) {
        $(row).find('.delete-row').bind('click',deleterow);
        $(row).find('select').each(function() {
            $(this).val("");
            var opts = [];
            $(this).find('option').each(function() {
               opts.push({value:$(this).attr('value'),name:$(this).html()}); 
            });
            $(this).html("");
            for ( var o in opts ) {
                $(this).append('<option' + (opts[o].value !== undefined && opts[o].value.length ? ' value="' + opts[o].value + '"' : '') + '>' + opts[o].name + '</option>');
            }
        });
        $(row).find('input').val("");
        $(row).find('textarea').html("").val("");
        $(row).find('.datepicker').datepicker("destroy");
        $(row).find('.datepicker').removeClass("hasDatepicker").removeAttr('id');
        $(row).find('.datepicker').datepicker(opts);
        var stext = '<option></option>';
	    for ( var i = 0; i < subjects.length; i++ ) {
	        stext += '<option>' + subjects[i] + '</option>';
	    };
        $(row).find('.subjectselector').html(stext);
        $(row).find('.institutionselector').unbind('change',limitsubjects).bind('change',limitsubjects);
        $(row).find('.subjectselector').unbind('change',limitlevels).bind('change',limitlevels);
    }

    // add / remove rows to list items
    $('.row.multi').each(function() {
        $(this).children().last().append('<p class="toprow">&nbsp;</p><p style="display:none;"><a class="btn btn-block btn-warning delete-row" href="#">delete</a></p><p><a class="btn btn-block btn-success add-row" href="#">add</a></p>');
    });

    var addrow = function(event) {
        event.preventDefault();
        var maxrows = 6;
        $(this).closest('.row').hasClass('manyrows') ? maxrows = 30 : false;
        $(this).closest('.row').siblings('.row').length == (maxrows - 1) ? $(this).hide() : false;
        if ( $(this).closest('.row').siblings('.row').length < maxrows ) {
            $('.select2this').select2('destroy').removeAttr('id').removeAttr('data-select2-id');
            var row = $(this).closest('.row').clone(true).get(0);
            /*$(row).children('div').each(function() {
                var p = $(this).children('p').first();
                if ( !$(p).hasClass('toprow') ) {
                    $(p).addClass('visible-xs').addClass('visible-sm'); 
                } else {
                    $(p).hide();
                }
            });*/
            $(this).closest('.row').append('<hr class="visible-xs visible-sm" style="border-color:#bbb;"></hr>');
            preprow(row);
            $(row).insertAfter($(this).closest('.row'));
            $(this).closest('.row').find('.add-row').parent().hide();
            $(this).closest('.row').find('.delete-row').parent().show();
            $('.select2this').select2({width:'100%'});
        }
    }
    $('.add-row').bind('click',addrow);
    var deleterow = function(event) {
        event.preventDefault();
        // if this is the first row, remove the visible-xs and visible-sm classes from the p tags of the next row
        var parent = $(this).closest('.row').parent();
        $(this).closest('.row').remove();
        $(parent).children('.row').first().children('div').each(function() {
            $(this).children('p').first().removeClass('visible-xs').removeClass('visible-sm');
            $(this).find('.toprow').show();
        });
    }
    $('.delete-row').bind('click',deleterow);

    var triggersave = function(event) {
        if ( !$('#survey').parsley('validate') ) {
            event.preventDefault();
            $('.part').hide();
            $(this).closest('.part').show();
            $('#activealert').show();
        }
    };
    $('#triggersave').bind('click',triggersave);
    
    var subjectslist = {};
    try {
        $.ajax({
            cache:false,
            method:'GET',
            datatype:'JSON',
            url:'/query/institution/_search?source=' + JSON.stringify({"size":1000, "query": {"query_string": {"query": "subjects.name:*"}}}),
            success: function(data) {
                for ( var i in data.hits.hits ) {
                    var nm = data.hits.hits[i]._source.name;
                    if (subjectslist[nm] === undefined) subjectslist[nm] = {};
                    for ( var s in data.hits.hits[i]._source.subjects ) {
                        var n = data.hits.hits[i]._source.subjects[s].name;
                        if (subjectslist[nm][n] === undefined) subjectslist[nm][n] = [];
                        subjectslist[nm][n].push(data.hits.hits[i]._source.subjects[s].level);
                    }
                }
            }
        });        
    } catch(err) {}

    var limitlevels = function(event) {
        var ls = $(this).closest('.row').find('.levelselector');
        if (ls.hasClass('select2this')) ls.select2('destroy').removeAttr('id').removeAttr('data-select2-id');
        ls.val("").attr("disabled","disabled");
        var institution = $(this).closest('.row').find('.institutionselector').val();
        var subject = $(this).val();
        var lopts = '<option></option>';
        if ( subjectslist[institution] !== undefined && typeof subjectslist[institution][subject] === 'object') {
            for ( var i in subjectslist[institution][subject] ) {
                lopts += "<option";
                if (subjectslist[institution][subject].length === 1) lopts += ' selected="selected"'; 
                lopts += ">" + subjectslist[institution][subject][i] + "</option>";
            }
        } else {
            var levels = {{ selections.advancedlevels|tojson|safe }};
            for ( var i = 0; i < levels.length; i++ ) {
                lopts += "<option>" + levels[i] + "</option>";
            }
        }
        ls.html(lopts).removeAttr("disabled");
        if (ls.hasClass('select2this')) ls.select2({width:'100%'});
    }
    var limitsubjects = function(event) {
        var institution = $(this).val();
        var ss = $(this).closest('.row').find('.subjectselector');
        if (ss.hasClass('select2this')) ss.select2('destroy').removeAttr('id').removeAttr('data-select2-id');
        ss.attr("disabled","disabled");
        var ls = $(this).closest('.row').find('.levelselector');
        if (ls.hasClass('select2this')) ls.select2('destroy').removeAttr('id').removeAttr('data-select2-id');
        ls.val("").attr("disabled","disabled");
        var opts = '<option></option>';
        if ( institution == "" || subjectslist[institution] === undefined) {
            for ( var i in subjects ) opts += "<option>" + subjects[i] + "</option>";
        } else {
            for ( var i in subjectslist[institution] ) opts += "<option>" + i + "</option>";
        }
        ss.html(opts).removeAttr("disabled");
        if (ss.hasClass('select2this')) ss.select2({width:'100%'});
        if (ls.hasClass('select2this')) ls.select2({width:'100%'});
    }
    $('.institutionselector').bind('change',limitsubjects);
    $('.subjectselector').bind('change',limitlevels);
    
	function checkKeys(e){
		 e = e || event;
		 var txtArea = /textarea/i.test((e.target || e.srcElement).tagName);
		 return txtArea || ( (e.keyCode || e.which || e.charCode || 0) !== 13 && (e.keyCode || e.which || e.charCode || 0) !== 8 && e.type !== 'text');
	}
	document.querySelector('form').onkeypress = checkKeys;
	
	$('#gender').bind('change',function(e) {
	   $('#gender_other').val('');
	   $('#show_gender_other').hide();
	   if ( $('#gender').val() == 'Other' ) $('#show_gender_other').show();
	});
	
	$('select').bind('change', function() { $(this).css({color: '#555'}); })
});
</script>

<style>
#container {
    width: none;
}
hr {
    border-color:#333;
}
h2 {
    margin-top: 0px;
}
.part .well{
    margin-top:50px;
}
.part .jumbotron{
    margin-top:50px;
}
.narrow{
    width:180px;
}
.narrow.datepicker{
    width:100px;
}
textarea {
    min-height:150px;
}
.select2-container > .selection > .select2-selection {
    height:34px;
    border-color:#ccc;
    color:#666;
    font-size:1.1em;
}
.select2-selection__rendered {
    color: #999;
}
.btn {
    color:#333;
}
.btn-success {
    color:#333;
}
.btn-info {
    color:#333;
}
.btn-warning {
    color:#333;
}
</style>

<div id="logo">
    <img src="/static/leaps_banner.png" alt="A group of students from the Lothians Equal Access Programme for Schools" title="A group of students from the Lothians Equal Access Programme for Schools" />
</div>

<form action="" id="survey" name="survey" method="post" data-validate="parsley">
<fieldset>


<!-- the intro part -->
<div class="part intro">

	<div class="row">
	    <div class="col-sm-12">
	        <div class="well">
	            <h1>Welcome to the LEAPS student survey</h1>
	        </div>
	    </div>
	</div>

	<div class="row">
	    <div class="col-sm-12">
	        <p>You can find out how we use and what we do with your personal data <a href="/policy">here</a>.
            When you are ready to begin the survey, please read the notes below.</p>
	        <p>This survey contains six parts. You must complete every part in order to successfully save your responses. It should take no more than 30 minutes to complete, if you prepare in advance. Please have details of your qualifications, personal interests, work experience, and possible University or College applications to hand before you start this survey.</p>
			<p>It is recommended that you complete this survey on a PC as it is easier than using an ipad or tablet.</p>
			<p><strong>Do not close your browser whilst completing the survey.</strong></p>
	        <p>Only the students of <strong>participating schools</strong> can complete the survey.</p>
	        <p>Each part presents <strong>instructions at the top</strong> on how to complete the questions in that part.</p> 
	        <p>Some fields will offer <strong>suggestions as you type</strong>. Choose a suitable suggestion if one is presented, otherwise 
	        continue to type and your text will be accepted.</p>
	        <p>If you need to <strong>insert extra rows</strong>, press <strong>add</strong> to get another row. If you want to <strong>delete a row</strong>, press <strong>delete</strong> to remove the row.</p>
	        <p>Required inputs have an asterisk and are shown in red, until they are completed appropriately, when they will become green. You should check that all required inputs are green before proceeding. Inputs that are optional remain white. You will only be able to submit the form once all required questions have been answered.</p>
	        <!--<p>You can navigate between parts using the <strong>Previous</strong> or <strong>Next</strong> buttons.</p>-->
        </div>
	</div>

</div>



<!-- the student details page -->
<div class="part student">

	<div class="row">
	    <div class="col-sm-12">
	        <div class="well">
	            <h2>Your details</h2>
	            <p><strong>Part 1 of 6</strong> - please provide your personal details below, to create your record.</p>
	        </div>
	    </div>
	</div>

	<div class="row">
	    <div class="col-sm-6">
	        <div class="row">
	            <div class="col-sm-3 hidden-xs">
                    <p>First name *</p>
	            </div>
	            <div class="col-sm-7">
            		<p><input class="form-control" type="text" name="first_name" data-required="true" placeholder="First name *"></p>
	            </div>
	        </div>
        </div>
	    <div class="col-sm-6">		
	        <div class="row">
	            <div class="col-sm-3 col-sm-offset-2 hidden-xs">
                    <p>Last name *</p>
	            </div>
	            <div class="col-sm-7">
            		<p><input class="form-control" type="text" name="last_name" data-required="true" placeholder="Last name *"></p>
	            </div>
	        </div>
        </div>
    </div>

	<div class="row">
	    <div class="col-sm-6">
	        <div class="row">
	            <div class="col-sm-3 hidden-xs">
                    <p>Date of birth *</p>
	            </div>
	            <div class="col-sm-7">
            		<p><input type="text" class="form-control dobdatepicker checkdob" id="date_of_birth" name="date_of_birth" data-required="true" data-trigger="keyup change focusout" placeholder="Date of birth *"></p>
            		<p class="dobwarning" style="color:red;font-size:0.8em;margin-bottom:10px;display:none;">format must be DD/MM/YYYY</p>
	            </div>
	        </div>
        </div>
	    <div class="col-sm-6">
	        <div class="row">
	            <div class="col-sm-3 col-sm-offset-2 hidden-xs">
                    <p>Gender *</p>
	            </div>
	            <div class="col-sm-7">
            		<p>
            		    <select class="form-control" id="gender" name="gender" data-required="true" style="color: #999;">
            		    <option value="" disabled="disabled" selected="selected">select Gender *</option>
            		    <option value="Male">Man / Male (including trans man)</option>
            		    <option value="Female">Woman / Female (including trans woman)</option>
            		    <option value="Other">In another way</option>
            		    <option value="Do not wish to disclose">Prefer not to say</option>
            		    </select>
            		    <p id="show_gender_other" style="display:none">
            		        If you want to tell us how you identify your gender, please enter it here, 
            		        or leave blank and we will simply record it as "Other": <br>
                		    <input type="text" class="form-control" id="gender_other" name="gender_other">
                		</p>
            		</p>
	            </div>
	        </div>
        </div>
    </div>

	<div class="row">
	    <div class="col-sm-6">
	        <div class="row">
	            <div class="col-sm-3 hidden-xs">
                    <p>Address *</p>
	            </div>
	            <div class="col-sm-7">
            		<p><input class="form-control" type="text" name="address_line_1" data-required="true" placeholder="Address *"></p>
	            </div>
	        </div>
        </div>
	    <div class="col-sm-6">
	        <div class="row">
	            <div class="col-sm-3 col-sm-offset-2 hidden-xs">
                    <p>Address line 2</p>
	            </div>
	            <div class="col-sm-7">
            		<p><input class="form-control" type="text" name="address_line_2" placeholder="Address line 2"></p>
	            </div>
	        </div>
        </div>
    </div>

	<div class="row">
	    <div class="col-sm-6">
	        <div class="row">
	            <div class="col-sm-3 hidden-xs">
                    <p>City *</p>
	            </div>
	            <div class="col-sm-7">
            		<p><input class="form-control" type="text" name="city" data-required="true" placeholder="City *"></p>
	            </div>
	        </div>
        </div>
	    <div class="col-sm-6">
	        <div class="row">
	            <div class="col-sm-3 col-sm-offset-2 hidden-xs">
                    <p>Region</p>
	            </div>
	            <div class="col-sm-7">
            		<p><input class="form-control" type="text" name="region" placeholder="Region"></p>
	            </div>
	        </div>
        </div>
    </div>

	<div class="row">
	    <div class="col-sm-6">
	        <div class="row">
	            <div class="col-sm-3 hidden-xs">
                    <p>Post code *</p>
	            </div>
	            <div class="col-sm-7">
            		<p><input class="form-control checkpostcode" type="text" name="post_code" id="post_code" data-required="true" placeholder="Post code *"></p>
            		<p class="postcodewarning" style="color:red;font-size:0.8em;margin-bottom:10px;display:none;">Please enter a valid UK post code</p>
	            </div>
	        </div>
        </div>
	    <div class="col-sm-6">
	        <div class="row">
	            <div class="col-sm-3 col-sm-offset-2 hidden-xs">
                    <p>Email address *</p>
	            </div>
	            <div class="col-sm-7">
            		<p><input class="form-control" type="text" name="email" data-type="email" data-required="true" data-trigger="keyup focusout" placeholder="Email address *"></p>
	            </div>
            </div>
        </div>
    </div>

	<div class="row">
	    <div class="col-sm-6">
	        <div class="row">
	            <div class="col-sm-3 hidden-xs">
                    <p>Home phone</p>
	            </div>
	            <div class="col-sm-7">
            		<p><input class="form-control" type="text" name="home_phone" placeholder="Home phone"></p>
	            </div>
	        </div>
        </div>
	    <div class="col-sm-6">
	        <div class="row">
	            <div class="col-sm-3 col-sm-offset-2 hidden-xs">
                    <p>Mobile phone</p>
	            </div>
	            <div class="col-sm-7">
            		<p><input class="form-control checkmobile" type="text" name="mobile_phone" id="mobile_phone" placeholder="Mobile phone"></p>
            		<p class="mobilewarning" style="color:red;font-size:0.8em;margin-bottom:10px;display:none;">For UK mobile numbers please enter in format starting 07, no +44, no spaces, 11 digits. Thank you.</p>
	            </div>
	        </div>
        </div>
    </div>
                    
	<div class="row">
	    <div class="col-sm-6">
	        <div class="row">
	            <div class="col-sm-3 hidden-xs">
                    <p>School *</p>
	            </div>
	            <div class="col-sm-7">
            		<p><select class="form-control select2this select2thisRequired" name="school" data-required="true" style="color: #999;">
            		    <option value="" disabled="disabled" selected="selected">select School *</option>
            		    {% for opt in selections.schools %}
            		        <option>{{ opt }}</option>
            		    {% endfor %}
            		</select></p>
	            </div>
	        </div>
        </div>
	    <div class="col-sm-6">
	        <div class="row">
	            <div class="col-sm-3 col-sm-offset-2 hidden-xs">
                    <p>School house</p>
	            </div>
	            <div class="col-sm-7">
            		<p><input class="form-control" type="text" name="school_house" placeholder="School house"></p>
	            </div>
	        </div>
        </div>
    </div>
                    
	<div class="row">
	    <div class="col-sm-6">
	        <div class="row">
	            <div class="col-sm-3 hidden-xs">
                    <p>Year group *</p>
	            </div>
	            <div class="col-sm-7">
            		<p><select class="form-control" name="year" data-required="true" style="color: #999;">
            		    <option value="" disabled="disabled" selected="selected">select Year group *</option>
            		    <option>Third year</option>
            		    <option>Fourth year</option>
            		    <option>Fifth year</option>
            		    <option>Sixth year</option>
            		    <option>Other</option>
            		</select></p>
	            </div>
	        </div>
        </div>
	    <div class="col-sm-6">
	        <div class="row">
	            <div class="col-sm-5 hidden-xs">
                    <p>Scottish Candidate Number (SCN)</p>
	            </div>
	            <div class="col-sm-7">
            		<p><input class="form-control" type="text" name="scn_number" placeholder="Scottish Candidate Number (SCN)"></p>
	            </div>
	        </div>
        </div>
    </div>

</div>



<!-- the qualifications page -->
<div class="part qualifications">

	<div class="row">
	    <div class="col-sm-12">
	        <div class="well">
	            <h2>Qualifications and currently sitting</h2>
	            <p><strong>Part 2 of 6</strong> - Please input details of all qualifications 
	            you have (or are studying for current year) for each year of school. 
	            Please include any qualifications you sat but did not pass. If you do not yet know your grade, 
	            select Unknown in the Grade field. If you have any qualifications that do not meet the criteria 
	            below, you will have the option to describe them on the following pages. Use one row per qualification.</p>
	        </div>
	    </div>
	</div>
	
    <div> <!-- need divs round each year quals set for row add/remove to work well-->

    	<div class="row multi manyrows">
    	    <div class="col-sm-2">
                <p>School year</p>
        		<p><select name="qualification_year" class="form-control">
        		    <option value="" disabled="disabled" selected="selected">select School year</option>
        		    <option>Third year</option>
        		    <option>Fourth year</option>
        		    <option>Fifth year</option>
        		    <option>Sixth year</option>
        		</select></p>
        	</div>
    	    <div class="col-sm-3">
                <p>Subject</p>
        		<p><select name="qualification_subject" class="select2this">
        		    <option value="" disabled="disabled" selected="selected">select Subject</option>
        		    {% for opt in selections.subjects %}
        		        <option>{{ opt }}</option>
        		    {% endfor %}
        		</select></p>
        	</div>
    	    <div class="col-sm-3">
                <p>Level of qualification</p>
        		<p><select name="qualification_level" class="select2this">
        		    <option value="" disabled="disabled" selected="selected">select Level of qualification</option>
        		    {% for opt in selections.levels %}
        		        <option>{{ opt }}</option>
        		    {% endfor %}
        		</select></p>
        	</div>
    	    <div class="col-sm-2">
                <p>Grade</p>
        		<p><select name="qualification_grade" class="select2this">
        		    <option value="" disabled="disabled" selected="selected">select Grade</option>
        		    {% for opt in selections.grades %}
        		        <option>{{ opt }}</option>
        		    {% endfor %}
        		</select></p>
        	</div>
    	    <div class="col-sm-2">
            </div>
    	</div>
	</div>

    <!--
    <hr></hr>

    <div>
        <h3>Fifth year qualifications</h3>
    
    	<div class="row multi manyrows">
    	    <div class="col-sm-3">
                <p>Subject</p>
        		<p><select name="qualification_subject" class="select2this">
        		    <option></option>
        		    {% for opt in selections.subjects %}
        		        <option>{{ opt }}</option>
        		    {% endfor %}
        		</select></p>
        	</div>
        	<div class="col-sm-2">
                <p>School year taken</p>
        		<p><select name="qualification_year" class="form-control">
        		    <option>Fifth year</option>
        		</select></p>
        	</div>
        	<div class="col-sm-3">
                <p>Level of qualification</p>
        		<td><select name="qualification_level" class="select2this">
        		    <option></option>
        		    {% for opt in selections.levels %}
        		        <option>{{ opt }}</option>
        		    {% endfor %}
        		</select></td>
        	</div>
        	<div class="col-sm-2">
                <p>Grade</p>
        		<p><select name="qualification_grade" class="select2this">
        		    <option></option>
        		    {% for opt in selections.grades %}
        		        <option>{{ opt }}</option>
        		    {% endfor %}
        		</select></p>
        	</div>
        	<div class="col-sm-2">
    	    </div>
    	</div>
    </div>
    
    <hr></hr>

    <div>
        <h3>Sixth year / other qualifications</h3>
    
    	<div class="row multi manyrows">
    	    <div class="col-sm-3">
                <p>Subject</p>
        		<p><select name="qualification_subject" class="select2this">
        		    <option></option>
        		    {% for opt in selections.subjects %}
        		        <option>{{ opt }}</option>
        		    {% endfor %}
        		</select></p>
            </div>
    	    <div class="col-sm-2">
                <p>School year taken</p>
        		<p><select name="qualification_year" class="form-control">
        		    <option>Sixth year</option>
        		    <option>Other</option>
        		</select></p>
            </div>
    	    <div class="col-sm-3">
                <p>Level of qualification</p>
        		<p><select name="qualification_level" class="select2this">
        		    <option></option>
        		    {% for opt in selections.levels %}
        		        <option>{{ opt }}</option>
        		    {% endfor %}
        		</select></p>
            </div>
    	    <div class="col-sm-2">
                <p>Grade</p>
        		<p><select name="qualification_grade" class="select2this">
        		    <option></option>
        		    {% for opt in selections.grades %}
        		        <option>{{ opt }}</option>
        		    {% endfor %}
        		</select></p>
            </div>
    	    <div class="col-sm-2">
    	    </div>
    	</div>
    </div>
    -->
</div>



        



<!-- the applications page -->
<div class="part applications">

	<div class="row">
	    <div class="col-sm-12">
	        <div class="well">
	            <h2>Potential Applications</h2>
	            <p><strong>Part 3 of 6</strong> - please list any applications for further or higher education that you are 
	            thinking of making. Use one row per application, up to the maximum of 6. If you have not made any decisions yet, 
	            please feel free to leave this section blank. The more information you add to this section, the more detailed 
	            your interview will be. Even if you have lots of different ideas, putting examples of some of them in this 
	            section will help us to advise you better.</p>
	        </div>
	    </div>
	</div>

	<div class="row multi">
	    <div class="col-sm-4">
            <p>College / University</p>
    		<p><select class="institutionselector select2this" name="application_institution">
    		    <option value="" disabled="disabled" selected="selected">select College / University</option>
    		    {% for opt in selections.institutions %}
    		        <option>{{ opt }}</option>
    		    {% endfor %}
    		</select></p>
    	</div>
	    <div class="col-sm-4">
            <p>Subject</p>
    		<p><select class="subjectselector select2this" name="application_subject">
    		    <option value="" disabled="disabled" selected="selected">select Subject</option>
    		    {% for opt in selections.advancedsubjects %}
    		        <option>{{ opt }}</option>
    		    {% endfor %}
    		</select></p>
    	</div>
	    <div class="col-sm-2">
            <p>Level of study</p>
    		<p><select class="levelselector select2this" name="application_level">
    		    <option value="" disabled="disabled" selected="selected">select Level of study</option>
    		    {% for opt in selections.advancedlevels %}
    		        <option>{{ opt }}</option>
    		    {% endfor %}
    		</select></p>
    	</div>
	    <div class="col-sm-2">
	    </div>
	</div>
</div>






        

<!-- the interests page -->
<div class="part interests">

	<div class="row">
	    <div class="col-sm-12">
	        <div class="well">
	            <h2>Interests and achievements</h2>
	            <p><strong>Part 4 of 6</strong> - please give short details of your extra-curricular interests and achievements e.g. 
								sport, music, drama, Duke of Edinburgh, prefect etc and they will be discussed in more detail at your interview. 
								It is recommended that you write your own copy of interests, achievements and work experience in a document elsewhere, 
								then insert them into this form. You will find the document useful for your personal statement in your UCAS application. 
								Remember - you won't be able to return to this form! 
								Use one box per interest, up to the maximum of 6.</p>
	        </div>
	    </div>
	</div>

	<div class="row multi">
	    <!--<div class="col-sm-4">
            <p>Title</p>
    		<p><input class="form-control" type="text" name="interest_title"></p>
    	</div>-->
	    <div class="col-sm-9">
            <p>Brief Description</p>
		    <!-- add data-required="true" to the following textarea to actually make the maxwords take effect -->
    		<p><textarea class="form-control" name="interest_brief_description" data-maxwords="200" data-trigger="keyup focusout change"></textarea></p>
    	</div>
	    <div class="col-sm-3">
	    </div>
	</div>

</div>






        


<!-- the experience page -->
<div class="part experience">

	<div class="row">
	    <div class="col-sm-12">
	        <div class="well">
	            <h2>Work and other experience</h2>
	            <p><strong>Part 5 of 6</strong> - please give short details of any work or voluntary experience you have had e.g. 
								paid employment, school committees, Access to the Professions events etc and they can be discussed further at 
								your interview. It is recommended that you write your own copy of interests, achievements and work experience 
								in a document elsewhere, then insert them into this form. You will find the document useful for your personal 
								statement in your UCAS application. Remember - you won't be able to return to this form! 
								Use one row per experience, up to the maximum of 6.</p>
					</div>
	    </div>
	</div>

	<div class="row multi">
	    <div class="col-sm-6">
            <p>Brief Description</p>
		    <!-- add data-required="true" to the following textarea to actually make the maxwords take effect -->
    		<p><textarea class="form-control" name="experience_brief_description" data-maxwords="200" data-trigger="keyup focusout change"></textarea></p>
    	</div>
	    <div class="col-sm-3">
            <p style="hidden-xs">Date from</p>
    		<p><input type="text" class="form-control datepicker" name="experience_date_from" placeholder="Date from"></p>
            <p style="hidden-xs">Date to</p>
    		<p><input type="text" class="form-control datepicker" name="experience_date_to" placeholder="Date to (unless ongoing)"></p>
    	</div>
	    <div class="col-sm-3">
            <p style="hidden-xs">Job title</p>
    		<p><input type="text" class="form-control" name="experience_title" placeholder="Job title"></p>
    	</div>
	</div>

</div>







<!-- the extra page -->
<div class="part extra">

	<div class="row">
	    <div class="col-sm-12">
	        <div class="well">
	            <h2>Additional academic and career information</h2>
	            <p><strong>Part 6 of 6</strong> - please provide information about any other factors that affected your 
	            academic achievements, and provide some details on your career goals and any other post school ideas that you have had.</p>
	        </div>
	    </div>
	</div>

	<div class="row">
	    <div class="col-sm-4">
            <p>Please describe any career or post school plans that you may have</p>
	    </div>
	    <div class="col-sm-8">
            <p><textarea class="form-control" name="career_plans"></textarea></p>
	    </div>
	</div>

	<div class="row">
	    <div class="col-sm-4">
            <p>List any additional qualifications not already mentioned (e.g. Sports Leadership etc)</p>
	    </div>
	    <div class="col-sm-8">
            <p><textarea class="form-control" name="additional_qualifications"></textarea></p>
	    </div>
	</div>

	<div class="row">
	    <div class="col-sm-4">
            <p>If you feel your academic performance has been affected at any time in school, 
			please tell us about it here e.g. a period of absence from school, time spent in care, estrangement, 
			health issues, caring responsibilities, bereavement. (At your 
			LEAPS interview, we may discuss if this would be relevant to share with university admissions tutors.)</p>
	    </div>
	    <div class="col-sm-8">
            <p><textarea class="form-control" name="issues_affecting_performance"></textarea></p>
	    </div>
	</div>

	<div class="row">
	    <div class="col-sm-4">
            <p>Do you have any particular queries or concerns that you would like covered at your LEAPS Interview?</p>
	    </div>
	    <div class="col-sm-8">
            <p><textarea class="form-control" name="particular_queries"></textarea></p>
	    </div>
	</div>

</div>







<!-- the form submission button -->
<div class="part submit">

	<!--<div class="row">
	    <div class="col-sm-12">
	        <div class="jumbotron">
	            <h2>Ready to submit</h2>
	            <p>You cannot edit your responses once you submit them.</p>
	        </div>
	    </div>
	</div>-->

	<div class="row" style="margin-top:30px;">
	    <div class="col-sm-12">
        	<p><input id="triggersave" class="btn btn-success btn-block" type="submit" name="submit" value="Submit your survey" /></p>
	    </div>
	    <div class="col-sm-6" style="display: none;">
	        <div id="activealert" class="alert alert-warning clearfix" style="display:none;">
	            <p>There are errors with your responses. Please click below to review your responses, then you can scroll through or use the previous / next buttons to check them. Any errors will be highlighted in red. Once there are no errors, please try to submit once again.</p>
	        </div>
    	    <p><button class="btn btn-warning btn-block review">Review your responses</button></p>
	    </div>
    </div>

</div>




</fieldset>
</form>

{% endblock %}


    

